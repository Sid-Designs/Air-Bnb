<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Air Bnb | Hotel Booking</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
      src="https://kit.fontawesome.com/ba9da31e74.js"
      crossorigin="anonymous"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <link
      rel="shortcut icon"
      href="/images/Airbnb-Logo-PNG-Pic.png"
      type="image/x-icon"
    />
    <link rel="stylesheet" href="/css/navbar.css" />
    <link rel="stylesheet" href="/css/style.css" />
    <style>
      #imagePreview {
        height: auto;
        width: 70%;
        max-height: 70vh;
      }
      .imgPar {
        display: flex;
        justify-content: center;
        align-items: center;
      }
    </style>
  </head>
  <body>
    <%- include('includes/navbar.ejs') %>
    <div class="container-lg">
      <div class="row">
        <div class="col-md-12 imgPar">
          <img
            id="imagePreview"
            class="img px-0 rounded"
            src="<%= lists.image.url %>"
            alt="Image Preview"
          />
        </div>
        <form
          class="row g-3 needs-validation"
          method="post"
          action="/hotels/<%= lists._id %>/edit?_method=PUT"
          enctype="multipart/form-data"
        >
          <div class="col-md-6">
            <label for="file" class="form-label">Filename</label>
            <div class="input-group has-validation">
              <span class="input-group-text" id="inputGroupPrepend">File</span>
              <input
                type="text"
                class="form-control"
                id="file"
                name="file"
                disabled
                aria-describedby="inputGroupPrepend"
                value="<%= lists.image.filename %>"
                required
              />
              <div class="invalid-feedback">Please enter a filename.</div>
            </div>
          </div>
          <div class="col-md-5">
            <label for="imageUrl" class="form-label"
              >upload New Image File</label
            >
            <input
              type="file"
              class="form-control"
              id="imageUrl"
              name="listing[image]"
              value="<%= lists.image.url %>"
            />
            <div class="valid-feedback">Looks good!</div>
          </div>
          <div class="col-md-6">
            <label for="title" class="form-label">Title</label>
            <input
              type="text"
              class="form-control"
              id="title"
              name="title"
              placeholder="Hotel Title"
              value="<%= lists.title %>"
              required
            />
            <div class="valid-feedback">Looks good!</div>
          </div>
          <div class="col-md-5">
            <label for="location" class="form-label">City</label>
            <input
              type="text"
              class="form-control"
              id="location"
              name="location"
              value="<%= lists.location %>"
              required
            />
            <div class="invalid-feedback">Please provide a valid city.</div>
          </div>
          <div class="col-11">
            <label for="description" class="form-label">Description</label>
            <textarea
              class="form-control"
              name="description"
              id="description"
              rows="5"
              required
            >
<%= lists.description %></textarea
            >
          </div>
          <div class="col-md-4">
            <label for="price" class="form-label">Price</label>
            <div class="input-group has-validation">
              <span class="input-group-text" id="inputGroupPrepend">â‚¹</span>
              <input
                type="number"
                class="form-control"
                id="price"
                name="price"
                aria-describedby="inputGroupPrepend"
                value="<%= lists.price %>"
                required
              />
              <div class="invalid-feedback">Please enter valid price.</div>
            </div>
          </div>
          <div class="col-md-7">
            <label for="country" class="form-label">Country</label>
            <input
              type="text"
              class="form-control"
              id="country"
              name="country"
              aria-describedby="inputGroupPrepend"
              value="<%= lists.country %>"
              required
            />
            <div class="invalid-feedback">Please select a valid country.</div>
          </div>
          <div class="col-11">
            <div class="form-check">
              <input
                class="form-check-input"
                type="checkbox"
                value=""
                id="invalidCheck"
                required
              />
              <label class="form-check-label" for="invalidCheck">
                Agree to terms and conditions
              </label>
              <div class="invalid-feedback">
                You must agree before submitting.
              </div>
            </div>
          </div>
          <div class="col-11">
            <button
              class="btn fw-semibold py-2"
              type="submit"
              style="background: #ff545f; color: #fff"
            >
              Submit
            </button>
          </div>
        </form>
      </div>
    </div>
    <%- include('includes/footer.ejs') %>
    <script>
      document.getElementById("imageUrl").addEventListener("input", () => {
        const imageUrl = document.getElementById("imageUrl").value;
        const imagePreview = document.getElementById("imagePreview");

        if (imageUrl) {
          imagePreview.src = imageUrl;
          imagePreview.style.display = "block";
        } else {
          imagePreview.style.display = "none";
        }
      });
    </script>
  </body>
</html>
